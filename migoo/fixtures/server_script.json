[
 {
  "allow_guest": 0,
  "api_method": "fetch_child_table",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-05-02 18:57:03.321940",
  "module": "",
  "name": "fetch child table",
  "reference_doctype": null,
  "script": "a = frappe.form_dict[\"no\"]\nparameter = frappe.db.sql(\"\"\" select parameters from `tabCategory Detail` where parent=%s \"\"\",a)\nparameter1 = \"\"\nfor i in parameter:\n    for j in i:\n        if parameter1 == \"\":\n            parameter1 = j\n        else:\n            parameter1 = parameter1 + \",\" + j\n            \n# frappe.msgprint(parameter1)\nfrappe.response[\"parameter\"]=parameter1\n\n\n\n\n",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "check_register_no",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-21 16:32:02.221740",
  "module": "Migoo CRM",
  "name": "Register Must be Uniqe",
  "reference_doctype": null,
  "script": "name=frappe.form_dict[\"register_no\"]\n\nqr =frappe.db.sql(\"select register_no from `tabItem` where register_no=%s \",name)\n\nli=\"\"\nfor i in qr:\n    for j in i:\n        li=j\n        \n# frappe.msgprint(li)\nfrappe.response[\"msg\"]=li",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "Select_option",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-14 18:25:53.386510",
  "module": "Migoo CRM",
  "name": "Select Option For Model No",
  "reference_doctype": null,
  "script": "category=frappe.form_dict[\"features\"]\ndata=frappe.db.sql(\"\"\"select option  from `tabModel Details` where name=%s \"\"\",category);\n\nlist1=\"\"\nfor i in data:\n   \n    for j in i:\n        if list1==\"\":\n           \n            list1=j\n    \n         \n\nx = list1.split(\"/\")\nif list1==\"\":\n    info1=0\n  \nelse:\n    info1 = (len(x))\naaa=(str(info1))\nfrappe.response[\"data\"]=x\nfrappe.response[\"message\"]=info1",
  "script_type": "API"
 },
 {
  "allow_guest": 1,
  "api_method": "expo",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-14 18:25:53.376439",
  "module": "Migoo CRM",
  "name": "expo inquiry",
  "reference_doctype": null,
  "script": "fname = frappe.form_dict[\"fname\"]\nlname = frappe.form_dict['lname']\nemail = frappe.form_dict[\"email\"]\nmobile_no = frappe.form_dict[\"mobile\"]\ncompany = frappe.form_dict[\"company\"]\n# notes = frappe.form_dict[\"textarea\"]\nwp = frappe.form_dict['wp']\nnowdate = frappe.form_dict['nowdate']\nequipment = frappe.form_dict['equipment']\n\n# frappe.msgprint(wp)\n# if wp != \"\":\ndata2 = frappe.new_doc(\"Inquiry Form\")\n# data2.request=request\ndata2.first_name=fname\ndata2.last_name = lname\ndata2.email_address = email\ndata2.mobile_no = mobile_no\ndata2.company_name = company\n# data2.supplier_notes = notes\ndata2.wpnumber = wp\ndata2.curdate = nowdate\ndata2.inquiry_source = \"Expo Inquiry\"\ndata2.item_details = equipment\n    \ndata2.save()\nfrappe.db.commit()",
  "script_type": "API"
 },
 {
  "allow_guest": 1,
  "api_method": "fetchdata",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-04-17 15:41:29.943388",
  "module": "Migoo CRM",
  "name": "fetch data website item (testing)",
  "reference_doctype": null,
  "script": "name = frappe.form_dict['id']\n\ndata = frappe.db.sql(\"select web_item_name,item_group,company_name,manufacturing_date,model,location,price,maker_model,equipment_current_reading,fuel_type,engine,weight,owner_count,registration_date,insurance_date,fitness_dt,supplier_number,supplier_name,sold_out from `tabWeb item` where name=%s\",name)\ndata1= frappe.db.sql(\"select image from `tabweb Item Slide Show` where parent=%s\",name)\n\nfrappe.response['message']=data\nfrappe.response['images']=data1",
  "script_type": "API"
 },
 {
  "allow_guest": 1,
  "api_method": "buy_inquiry",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-21 18:11:07.023272",
  "module": "Migoo CRM",
  "name": "Buy Inquiry",
  "reference_doctype": null,
  "script": "# frappe.msgprint(\"Test\")\nfname = frappe.form_dict[\"fname\"]\n# frappe.msgprint(fname)\nlname = frappe.form_dict['lname']\nemail = frappe.form_dict[\"email\"]\nmobile_no = frappe.form_dict[\"mobile\"]\ncompany = frappe.form_dict[\"company\"]\nnotes = frappe.form_dict[\"textarea\"]\n# # wp = frappe.form_dict['wp']\n# nowdate = frappe.form_dict['nowdate']\nequipment = frappe.form_dict['equipment']\n\n# data2 = frappe.new_doc(\"Inquiry Form\")\n# # data2.request=request\n# data2.first_name=fname\n# data2.last_name = lname\n# data2.email_address = email\n# data2.mobile_no = mobile_no\n# data2.company_name = company\n# # data2.supplier_notes = notes\n# data2.wpnumber = wp\n# data2.curdate = nowdate\n# data2.inquiry_source = \"Buy Inquiry\"\n# data2.item_details = equipment\n    \n# data2.save()\n# frappe.db.commit()\n\na = frappe.get_doc({\"doctype\":\"Inquiry Form\",\"request\":\"Buy/Sell\",\"item_details\":equipment,\"first_name\":fname,\"inquiry_source\": \"Website\",\"last_name\":lname,\"email_address\":email,\"mobile_no\":mobile_no,\"supplier_notes\":notes,\"company_name\":company})\na.insert()\nfrappe.db.commit()",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "website_item2",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-21 18:08:32.766380",
  "module": "Migoo CRM",
  "name": "Website Item 2",
  "reference_doctype": null,
  "script": "name=frappe.form_dict[\"name\"] \nitem_group=frappe.form_dict[\"item_group\"] \nprice=frappe.form_dict[\"standard_rate\"] \nsupplier = frappe.form_dict[\"supplier\"] \nsupplier_number = frappe.form_dict[\"supplier_number\"] \nprice = frappe.form_dict[\"standard_rate\"] \nmanufacturing_date = frappe.form_dict[\"equipment_manufacturing_year\"] \nmodel = frappe.form_dict[\"brand\"] \nsub = frappe.form_dict[\"sub\"] \nmakermodel = frappe.form_dict[\"equipment_model_no\"] \nsupplier_company = frappe.form_dict[\"supplier_company\"] \nfinance = frappe.form_dict[\"finance\"] \nequipment_condition=frappe.form_dict[\"equipment_condition\"] \nequipment_current_reading=frappe.form_dict[\"equipment_current_reading\"] \nlocation=frappe.form_dict[\"location\"] \nshort_description=frappe.form_dict[\"short_description\"] \ndescription=frappe.form_dict[\"description\"] \nequipment_insurance = frappe.form_dict[\"equipment_insurance\"] \nimg1 = frappe.form_dict[\"img1\"] \nimg2 = frappe.form_dict[\"img2\"] \nimg3 = frappe.form_dict[\"img3\"] \nimg4 = frappe.form_dict[\"img4\"] \nimg5 = frappe.form_dict[\"img5\"] \nimg6 = frappe.form_dict[\"img6\"] \ntest = frappe.form_dict[\"test\"] \ntest1=test.split(\",\") \n# # frappe.msgprint(test1) \nlist1=[img1,img2,img3,img4,img5,img6] \nd=frappe.db.sql(\"\"\"select supplier from `tabItem` where name=%s\"\"\",name) \nlist11 = \"\" \nfor i in d: \n    for j in i: \n        if list11==\"\": \n            list11=j \n            # frappe.msgprint(list1) \ndd = frappe.db.sql(\"\"\"select mobile_number from `tabSupplier` where name=%s\"\"\",list11) \nlist2 = [] \nfor ii in dd: \n    for jj in ii: \n        if list2==[]: \n            list2=jj \n\nddd = frappe.db.sql(\"\"\"select supplier_name from `tabSupplier` where name=%s\"\"\",list11) \nlist3 = \"\" \nfor iii in ddd: \n    for jjj in iii: \n        if list3==\"\": \n            list3=jjj \n            \na = frappe.get_doc({\"doctype\":\"Web item\",\"web_item_name\":sub,\"maker_model\":makermodel,\"company_name\":supplier_company,\"item_code\":name,\"item_name\":name,\"description\":name, \"item_group\":item_group, \"price\":price, \"website_image\":img1, \"model\":model,\"insurance_date\":equipment_insurance,\"website_image\":img1,\"manufacturing_date\":manufacturing_date,\"equipment_current_reading\":equipment_current_reading, \"equipment_condition\":equipment_condition,\"supplier\":supplier,\"supplier_number\":list2,\"supplier_name\":list3,\"location\":location,\"short_description\":short_description,\"description\":description,\"under_finance\":finance}) \na.insert() \nfrappe.db.commit() \ndoc = frappe.get_doc('Web item', a.name) \nfor j in list1: \n    if j!=\"\": \n        doc.append('web_item_slide_show', \n        { \n        'image': j, \n        # 'request_type':request\n        }) \n        doc.save() \n        frappe.db.commit()\nfor i in test1: \n    if i!=\"\": \n        doc.append('web_item_slide_show', \n        { \n        'image': i, \n        # 'request_type':request\n        }) \n        doc.save() \n        frappe.db.commit() \nfrappe.db.commit() \nfrappe.msgprint(\"Web Item Create\") ",
  "script_type": "API"
 },
 {
  "allow_guest": 1,
  "api_method": "fetchdata",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-04-17 15:41:33.810523",
  "module": "Migoo CRM",
  "name": "fetch data website item",
  "reference_doctype": null,
  "script": "name = frappe.form_dict['id']\n\n\ndata = frappe.db.sql(\"select web_item_name,item_group,company_name,manufacturing_date,model,location,price,maker_model,equipment_current_reading,fuel_type,engine,weight,owner_count,registration_date,insurance_date,fitness_dt,supplier_number,supplier_name,sold_out from `tabWeb item` where name=%s\",name)\ndata1= frappe.db.sql(\"select image from `tabweb Item Slide Show` where parent=%s\",name)\n\nfrappe.response['message']=data\nfrappe.response['images']=data1",
  "script_type": "API"
 },
 {
  "allow_guest": 1,
  "api_method": "buycontact",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-14 18:25:53.147816",
  "module": "Migoo CRM",
  "name": "Equipment Buy Inquiry",
  "reference_doctype": null,
  "script": "\n\nfname = frappe.form_dict['fname']\nlname = frappe.form_dict['lname']\ncompany = frappe.form_dict['company']\nemail = frappe.form_dict['email']\nmobile = frappe.form_dict['mobile']\nwp = frappe.form_dict['wp']\nnotes = frappe.form_dict['textarea']\nnowdate = frappe.form_dict['nowdate']\n\n\ndata2 = frappe.new_doc(\"Inquiry Form\")\n\ndata2.first_name=fname\ndata2.last_name = lname\ndata2.email_address = email\ndata2.mobile_no = mobile\ndata2.company_name = company\ndata2.supplier_notes = notes\ndata2.wpnumber = wp\ndata2.curdate = nowdate\ndata2.inquiry_source = \"Buy Inquiry\"\n\n\n\n    \ndata2.save()\nfrappe.db.commit()\n\nfrappe.response['message'] = data2.mobile_no\n\n",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "web_img",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-14 18:25:53.105873",
  "module": "Migoo CRM",
  "name": "Web Image",
  "reference_doctype": null,
  "script": "name=frappe.form_dict[\"name\"]",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "address",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-16 16:51:44.496913",
  "module": "Migoo CRM",
  "name": "Lead Address",
  "reference_doctype": null,
  "script": "address_title=frappe.form_dict[\"address_title\"]\naddress_line1=frappe.form_dict[\"address_line1\"]\npostal_code=frappe.form_dict[\"postal_code\"]\n# area=frappe.form_dict[\"area\"]\ncity=frappe.form_dict[\"city\"]\nstate=frappe.form_dict[\"state\"]\n\nname=frappe.form_dict[\"name\"]\n\ntitle=address_title+\"-Billing\"\n\na = frappe.get_doc({\"doctype\":\"Address\",\"address_title\":address_title,\"address_line1\":address_line1,\"city\":city, \"pincode\":postal_code,\"state\":state})\n\na.insert()\n\nparent = frappe.get_doc('Address', title)\nparent.append(\"links\", {\n    'link_doctype': 'Lead',\n    'link_name': name,\n    # 'link_title':'Sahil Patel'\n    \n})\nparent.save()\nfrappe.db.commit()\n",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "model_no",
  "disabled": 1,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-14 18:25:53.297483",
  "module": "Migoo CRM",
  "name": "Item",
  "reference_doctype": null,
  "script": "category=frappe.form_dict[\"category\"]\ndata=frappe.db.sql(\"\"\"select name  from `tabItem Group` where parent_item_group=%s \"\"\",category);\n\nlist1=\"\"\nfor i in data:\n   \n    for j in i:\n        if list1==\"\":\n           \n            list1=j\n        else:\n            list1 = list1 + \",\" + j\n         \n\nx = list1.split(\",\")\nif list1==\"\":\n    info1=0\n  \nelse:\n    info1 = (len(x))\naaa=(str(info1))\n\nfrappe.response[\"message\"]=info1",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "supplier",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-14 18:25:53.337503",
  "module": "Migoo CRM",
  "name": "User Permissions",
  "reference_doctype": null,
  "script": "user=frappe.form_dict[\"user\"]\nsupplier=frappe.form_dict[\"supplier\"]\ndata=frappe.get_doc({\"doctype\":\"User Permission\",\"user\":user,\"allow\":\"Supplier\",\"for_value\":supplier})\ndata.insert()",
  "script_type": "API"
 },
 {
  "allow_guest": 1,
  "api_method": "contact-us123",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-14 18:25:53.267090",
  "module": "Migoo CRM",
  "name": "Contact Us",
  "reference_doctype": null,
  "script": "# data1 = frappe.form_dict[\"requesttype\"]\n# data2 = frappe.form_dict[\"fname\"]\n# data3 = frappe.form_dict[\"lname\"]\n# data4 = frappe.form_dict[\"company\"]\n# data5 = frappe.form_dict[\"email\"]\n# data6 = frappe.form_dict[\"mobile\"]\n# data7 = frappe.form_dict[\"textarea\"]\n\n\n\n# data = frappe.new_doc(\"Lead\")\n\n# data.request=data1\n# data.first_name=data2\n# data.last_name = data3\n# data.company_name = data4\n# data.email_address = data5\n# data.mobile_no = data6\n# data.supplier_notes = data7\n\n\n# data.save()\n\n# frappe.db.commit()\n\ndata1 = frappe.form_dict[\"requesttype\"]\ndata2 = frappe.form_dict[\"fname\"]\ndata3 = frappe.form_dict[\"lname\"]\ndata4 = frappe.form_dict[\"company\"]\ndata5 = frappe.form_dict[\"email\"]\ndata6 = frappe.form_dict[\"mobile\"]\ndata7 = frappe.form_dict[\"textarea\"]\ndata8 = frappe.form_dict[\"equipment\"]\ndata9 = frappe.form_dict[\"nowdate\"]\nwats = frappe.form_dict['wp']\n\n# frappe.msgprint(data9)\n\n# data = frappe.new_doc(\"Lead\")\n\n# data.request=data1\n# data.first_name=data2\n# data.last_name = data3\n# data.company_name = data4\n# data.email_address = data5\n# data.mobile_no = data6\n# data.supplier_notes = data7\n\n\n# data.save()\n\n# frappe.db.commit()\n\n\n\nif wats == \"\":\n    data = frappe.new_doc(\"Inquiry Form\")\n\n\n    data.request=data1\n    data.first_name=data2\n    data.last_name = data3\n    data.company_name = data4\n    data.email_address = data5\n    data.mobile_no = data6\n    data.supplier_notes = data7\n    data.item_detail = data8\n    data.curdate = data9\n    data.inquiry_source = \"Website Inquiry\"\n    \n    data.save()\n    \n    frappe.db.commit()\nelse:\n    data = frappe.new_doc(\"Inquiry Form\")\n\n\n    data.request=data1\n    data.first_name=data2\n    data.last_name = data3\n    data.company_name = data4\n    data.email_address = data5\n    data.mobile_no = data6\n    data.supplier_notes = data7\n    data.wpnumber = wats\n    data.item_detail = data8\n    data.curdate = data9\n    data.inquiry_source = \"Website Inquiry\"\n    \n    data.save()\n    \n    frappe.db.commit()\n\n",
  "script_type": "API"
 },
 {
  "allow_guest": 1,
  "api_method": "supplier_registration",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-14 18:25:53.206970",
  "module": "Migoo CRM",
  "name": "Supplier Register",
  "reference_doctype": null,
  "script": "data1 = frappe.form_dict[\"suppliertype\"]\ndata2 = frappe.form_dict[\"company\"]\ndata3 = frappe.form_dict[\"fname\"]\ndata4 = frappe.form_dict[\"email\"]\ndata5 = frappe.form_dict[\"mobile\"]\nwp = frappe.form_dict[\"wp\"]\n\ndata = frappe.new_doc(\"Supplier\")\n\ndata.supplier_type=data1\ndata.company_name=data2\ndata.supplier_name = data3\ndata.name_of_suppier = data3\ndata.email = data4\ndata.mobile_number = data5\ndata.whatsapp_no = data5\n\ndata.save()\n\t\nfrappe.db.commit()",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "name",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-14 18:25:53.322916",
  "module": "Migoo CRM",
  "name": "Capital Register no",
  "reference_doctype": null,
  "script": "name=frappe.form_dict[\"name1\"]\nname12=name.upper()\nfrappe.response[\"message\"]=name12",
  "script_type": "API"
 },
 {
  "allow_guest": 1,
  "api_method": "login1",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-14 18:25:53.307187",
  "module": "Migoo CRM",
  "name": "Role profile",
  "reference_doctype": null,
  "script": "data1 = frappe.form_dict[\"email\"]\nd=frappe.db.sql(\"\"\"select role_profile_name from `tabUser` where email =%s \"\"\",data1)\nlist1 = \"\"            \nfor i in d:\n    for j in i:\n        if list1==\"\":\n            list1=j\n\nfrappe.response[\"role\"]=list1",
  "script_type": "API"
 },
 {
  "allow_guest": 1,
  "api_method": "contact-us1",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-04-20 18:51:18.104957",
  "module": "Migoo CRM",
  "name": "Item Inquiry",
  "reference_doctype": null,
  "script": "# data1 = frappe.form_dict[\"requesttype\"]\n# data2 = frappe.form_dict[\"fname\"]\n# data3 = frappe.form_dict[\"lname\"]\n# data5 = frappe.form_dict[\"email\"]\n# data6 = frappe.form_dict[\"mobile\"]\n# data7 = frappe.form_dict[\"textarea\"]\n# data8 = frappe.form_dict[\"equipment\"]\n# data9 = frappe.form_dict[\"company\"]\n\n\n# data = frappe.new_doc(\"Lead\")\n\n\n# data.request=data1\n# data.first_name=data2\n# data.last_name = data3\n# data.email_address = data5\n# data.mobile_no = data6\n# data.supplier_notes = data7\n# data.item_details = data8\n# data.company_name = data9\n\n# data.save()\n\n# frappe.db.commit()\n\nrequest = frappe.form_dict[\"requesttype\"]\nfname = frappe.form_dict[\"fname\"]\nlname = frappe.form_dict['lname']\nemail = frappe.form_dict[\"email\"]\nmobile_no = frappe.form_dict[\"mobile\"]\ncompany = frappe.form_dict[\"company\"]\nnotes = frappe.form_dict[\"textarea\"]\nwp = frappe.form_dict['wp']\nnowdate = frappe.form_dict['nowdate']\nequipment = frappe.form_dict['equipment']\n\n# frappe.msgprint(wp)\n# if wp != \"\":\ndata2 = frappe.new_doc(\"Inquiry Form\")\ndata2.request=request\ndata2.first_name=fname\ndata2.last_name = lname\ndata2.email_address = email\ndata2.mobile_no = mobile_no\ndata2.company_name = company\ndata2.supplier_notes = notes\ndata2.wpnumber = wp\ndata2.curdate = nowdate\ndata2.inquiry_source = \"Equipment Inquiry\"\ndata2.item_details = equipment\n    \ndata2.save()\nfrappe.db.commit()\n    \n# frappe.msgprint(\"worked\")",
  "script_type": "API"
 },
 {
  "allow_guest": 1,
  "api_method": "validation",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-14 18:25:53.290619",
  "module": "Migoo CRM",
  "name": "Email Validation For Supplier",
  "reference_doctype": null,
  "script": "email1=frappe.form_dict[\"email\"]\n\nd=frappe.db.sql(\"\"\"select email from `tabSupplier` where email=%s\"\"\",email1)\n\nlist1 = \"\"            \nfor i in d:\n    for j in i:\n        if list1==\"\":\n            list1=j\nfrappe.response[\"eid\"]=list1",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "user_number",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-14 18:25:53.275437",
  "module": "Migoo CRM",
  "name": "User Number Fetch",
  "reference_doctype": null,
  "script": "user=frappe.form_dict[\"user_number\"]\n\nd=frappe.db.sql(\"\"\"select phone from `tabUser` where email=%s\"\"\",user)\nlist1 = \"\"           \nfor i in d:\n    for j in i:\n        if list1==\"\":\n            list1=j\n            \n\n# info1=(int(list1))\nfrappe.response[\"message\"]=list1",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "inquiry",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-04-20 19:04:05.847313",
  "module": "Migoo CRM",
  "name": "Inquiry Form for CRM",
  "reference_doctype": null,
  "script": "request = frappe.form_dict[\"request\"]\rfname = frappe.form_dict[\"fname\"]\rlname = frappe.form_dict['lname']\remail = frappe.form_dict[\"email\"]\rmobile_no = frappe.form_dict[\"mobile\"]\rcompany = frappe.form_dict[\"company\"]\rnotes = frappe.form_dict[\"notes\"]\requip = frappe.form_dict['equipment']\rdt = frappe.form_dict[\"date\"]\rwp = frappe.form_dict['watsappno']\rlead_source = frappe.form_dict['inquiry_source']\requipment_id = frappe.form_dict['equipmentid']\r\r\rleadup = \"\"\rcheck_opp = \"\"\ropportunity = \"\"\rlist1=\"\"\rcustomeropp = \"\"\rcust = \"\"\rop = \"\"\rcustomer = frappe.db.sql(\"select customer_name from `tabCustomer` where whatsapp_no = %s OR phone=%s \",(mobile_no,mobile_no))\rdk2 = frappe.db.sql(\"select name from `tabLead` where status != 'Converted' AND status != 'Opportunity' AND email_id = %s\" ,email)\rdk3 = frappe.db.sql(\"select name from `tabLead` where email_id=%s \",email )\rdk = frappe.db.sql(\"select name from `tabLead` where status = 'Converted' AND email_id=%s \",email )\r\r\rfor a1 in dk2:\r    for b1 in a1:\r        if leadup==\"\":\r            leadup=b1\r            \rfor a1 in dk3:\r    for b1 in a1:\r        if check_opp==\"\":\r            check_opp=b1\r            \rfor i in dk:\r    for j in i:\r        if list1==\"\":\r            list1=j\r\rfor c in customer:\r    for d in c:\r        if cust==\"\":\r            cust = d\r\rif leadup != \"\":\r    \r    # frappe.msgprint(\"lead update\")\r    doc1 = frappe.get_doc('Lead', leadup)\r    doc1.append('equipment_inquiry', {\r       'equipment_name': equip,\r       'equipment_id':equipment_id,\r        'request_type':request,\r        'inquiry_date':dt,\r        'notes':notes\r    })\r    doc1.save()\r    frappe.db.commit()  \r    frappe.msgprint(\"Lead is Updated <a href='/app/lead/\"+leadup+\"'><b>\"+leadup+\"</b></a>\")\r    \relif cust != \"\":\r    data = frappe.new_doc(\"Opportunity\")\r    data.opportunity_from = \"Customer\"\r    data.party_name = cust\r    data.contact_mobile = mobile_no\r    data.phone = mobile_no\r    data.whatsapp = wp\r    data.save()\r    \r    doc12 = frappe.get_doc('Opportunity', data.name)\r    doc12.append('equipment_inquiry', {\r        'equipment_name': equip,\r        'equipment_id':equipment_id,\r         'request_type':request,\r        'inquiry_date':dt,\r        'notes':notes\r    })\r    doc12.save() \r    frappe.db.commit()\r    frappe.msgprint(\"Customer's Opportunity is Created <a href='/app/opportunity/\"+data.name+\"'><b>\"+data.name+\"</b></a>\")\r    \relif check_opp != \"\":\r     dataop = frappe.new_doc(\"Opportunity\")\r     dataop.opportunity_from = \"Lead\"\r     dataop.party_name = check_opp\r     dataop.contact_mobile = mobile_no\r     dataop.phone = mobile_no\r     dataop.whatsapp = wp\r     dataop.save()\r     doc3 = frappe.get_doc('Opportunity', dataop.name)\r     doc3.append('equipment_inquiry', {\r       'equipment_name': equip,\r       'equipment_id':equipment_id,\r        'request_type':request,\r        'inquiry_date':dt,\r        'notes':notes\r     })\r     doc3.save()\r     frappe.db.commit()\r     frappe.msgprint(\"New Opportunity is Create <a href='/app/opportunity/\"+dataop.name+\"'><b>\"+dataop.name+\"</b></a>\") \r     \relse:\r    \r    data2 = frappe.new_doc(\"Lead\")\r    data2.request=request\r    data2.first_name=fname\r    data2.last_name = lname\r    data2.email_id = email\r    data2.mobile_no = mobile_no\r    data2.company_name = company\r    # data2.supplier_notes = notes\r    data2.whatsapp_no = wp\r    data2.source= lead_source\r        \r    data2.save()\r    \r    doc2 = frappe.get_doc('Lead', data2.name)\r    doc2.append('equipment_inquiry', {\r       'equipment_name': equip,\r       'equipment_id':equipment_id,\r        'request_type':request,\r        'inquiry_date':dt,\r        'notes':notes\r        })\r\r    doc2.save()\r    frappe.db.commit()\r    frappe.msgprint(\"New Lead is created <a href='/app/lead/\"+data2.name+\"'><b>\"+data2.name+\"</b></a>\")  \r    # frappe.msgprint(\"worked\")\r    \r    \r",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "website_item",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-21 18:07:19.677000",
  "module": "Migoo CRM",
  "name": "Website Item",
  "reference_doctype": null,
  "script": "# frappe.msgprint(\"Hello\")\nname=frappe.form_dict[\"name\"]\nitem_group=frappe.form_dict[\"item_group\"]\nprice=frappe.form_dict[\"standard_rate\"]\nmaker_model=frappe.form_dict[\"makermodel\"]\nvehicle_class=frappe.form_dict[\"vehicle_class\"]\nowner_count=frappe.form_dict[\"owner_count\"]\nmodel11=frappe.form_dict[\"model\"]\nmodel1=model11.split(\"/\")\nmodel=model1[0]\n\nsub=frappe.form_dict[\"sub\"]\nfitness_dt=frappe.form_dict[\"fitness_dt\"]\ninsurance_date=frappe.form_dict[\"insurance_date\"]\nmanufacturing_date=frappe.form_dict[\"manufacturing_date\"]\nregistration_date=frappe.form_dict[\"registration_date\"]\nequipment_condition=frappe.form_dict[\"equipment_condition\"]\nequipment_current_reading=frappe.form_dict[\"equipment_current_reading\"]\nlocation=frappe.form_dict[\"location\"]\nshort_description=frappe.form_dict[\"short_description\"]\ndescription=frappe.form_dict[\"description\"]\nimg1 = frappe.form_dict[\"img1\"]\nimg2 = frappe.form_dict[\"img2\"]\nimg3 = frappe.form_dict[\"img3\"]\nimg4 = frappe.form_dict[\"img4\"]\nimg5 = frappe.form_dict[\"img5\"]\nimg6 = frappe.form_dict[\"img6\"]\ntest = frappe.form_dict[\"test\"]\n\ntest1=test.split(\",\")\n# frappe.msgprint(test1)\n\nlist1=[img1,img2,img3,img4,img5,img6]\n\nd=frappe.db.sql(\"\"\"select supplier from `tabItem` where name=%s\"\"\",name)\nlist11 = \"\"           \nfor i in d:\n    for j in i:\n        if list11==\"\":\n            list11=j\n# frappe.msgprint(list1)\ndd = frappe.db.sql(\"\"\"select mobile_number from `tabSupplier` where name=%s\"\"\",list11)\nlist2 = []     \nfor ii in dd:\n    for jj in ii:\n        if list2==[]:\n            list2=jj\n            \nddd = frappe.db.sql(\"\"\"select supplier_name from `tabSupplier` where name=%s\"\"\",list11)\nlist3 = \"\"     \nfor iii in ddd:\n    for jjj in iii:\n        if list3==\"\":\n            list3=jjj     \n\na = frappe.get_doc({\"doctype\":\"Web item\",\"web_item_name\":sub,\"item_code\":name,\"item_name\":name,\"description\":name, \"item_group\":item_group, \"price\":price,\"website_image\":img1,\n\"maker_model\":maker_model,\"vehicle_class\":vehicle_class,\"owner_count\":owner_count,\"model\":model,\"fitness_dt\":fitness_dt,\"insurance_date\":insurance_date,\n\"website_image\":img1,\"manufacturing_date\":manufacturing_date,\"registration_date\":registration_date, \"equipment_current_reading\":equipment_current_reading,\n\"equipment_condition\":equipment_condition,\"location\":location,\"short_description\":short_description,\"description\":description,\"supplier_name\":list3,\"supplier_number\":list2})\n\na.insert()\n\nfrappe.db.commit()\n\ndoc = frappe.get_doc('Web item', a.name)\n\nfor j in list11:\n    doc.append('web_item_slide_show', {\n    'image': j,\n        #  'request_type':request\n    })\n\n\n    doc.save()\n    frappe.db.commit()\n    \nfor i in test1:\n    doc.append('web_item_slide_show', {\n    'image': i,\n        #  'request_type':request\n    })\n\n\n    doc.save()\n    frappe.db.commit()\nfrappe.db.commit()\nfrappe.msgprint(\"Web Item Create\")",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "suppler_mo_no",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-14 18:25:53.251301",
  "module": "Migoo CRM",
  "name": "Supplier details fetch",
  "reference_doctype": null,
  "script": "item=frappe.form_dict[\"item\"]\n\nd=frappe.db.sql(\"\"\"select supplier from `tabItem` where name=%s\"\"\",item)\nlist11 = \"\"           \nfor i in d:\n    for j in i:\n        if list11==\"\":\n            list11=j\nfrappe.msgprint(list1)\ndd = frappe.db.sql(\"\"\"select mobile_number from `tabSupplier` where name=%s\"\"\",list11)\nlist2 = []     \nfor ii in dd:\n    for jj in ii:\n        if list2==[]:\n            list2=jj\n            \nddd = frappe.db.sql(\"\"\"select supplier_name from `tabSupplier` where name=%s\"\"\",list11)\nlist3 = \"\"     \nfor iii in ddd:\n    for jjj in iii:\n        if list3==\"\":\n            list3=jjj            \n\nno=str(list2)\nfrappe.response[\"message\"]=list3\nfrappe.response[\"msg\"]=no\n# frappe.msgprint(list3)",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "opp_reference",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-14 18:25:53.217444",
  "module": "Migoo CRM",
  "name": "Opportunity Reference",
  "reference_doctype": null,
  "script": "request = frappe.form_dict[\"name1\"]\nnm=frappe.form_dict[\"nm\"]\n\nlist1=\"\"\nlist2=\"\"\n\ndk4 = frappe.db.sql(\"select name from `tabOpportunity` where party_name=%s\",request)\nfor i in dk4:\n    for j in i:\n        if list1==\"\":\n            list1=j\n        else:\n            list1=list1 + \",\" +j\narray=list1.split(\",\")\nb=[]\na=len(array)\nc=str(a)\nfrappe.response[\"len\"] = c\nfrappe.response[\"message\"] = list1\n",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "check_address_lead",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-16 16:52:21.639406",
  "module": "Migoo CRM",
  "name": "check_address_lead",
  "reference_doctype": null,
  "script": "name=frappe.form_dict[\"name\"]\nparent=name+\"-Billing\"\nqr =frappe.db.sql(\"select link_name from `tabDynamic Link` where link_doctype='Lead' AND parent=%s AND link_name=%s\",(parent,name))\n\nli=\"\"\nfor i in qr:\n    for j in i:\n        li=j\n        \n# frappe.msgprint(li)\nfrappe.response[\"msg\"]=li",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "check_address",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-16 16:51:06.110847",
  "module": "Migoo CRM",
  "name": "Check Supplier Address Exist Or Not",
  "reference_doctype": null,
  "script": "name=frappe.form_dict[\"name\"]\nparent=name+\"-Billing\"\nqr =frappe.db.sql(\"select link_name from `tabDynamic Link` where link_doctype='Supplier'AND parent=%s AND link_name=%s\",(parent,name))\n\nli=\"\"\nfor i in qr:\n    for j in i:\n        li=j\nfrappe.response[\"data\"]=li",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "supplier_address",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-16 16:50:35.434488",
  "module": "Migoo CRM",
  "name": "supplier_address123",
  "reference_doctype": null,
  "script": "\n\naddress_line1=frappe.form_dict[\"address_line1\"]\n\ncity=frappe.form_dict[\"city\"]\nstate=frappe.form_dict[\"state\"]\npincode=frappe.form_dict[\"pincode\"]\n\nname=frappe.form_dict[\"name\"]\n\ntitle=name+\"-Billing\"\n# frappe.msgprint(title)\n\na = frappe.get_doc({\"doctype\":\"Address\",\"address_title\":name,\"address_line1\":address_line1,\"city\":city, \n\"state\":state ,\"pincode\":pincode})\n\na.insert()\n\nparent = frappe.get_doc('Address', title)\nparent.append(\"links\", {\n    'link_doctype': 'Supplier',\n    'link_name': name,\n    # 'link_title':'Sahil Patel'\n    \n})\nparent.save()\nfrappe.db.commit()\n",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "get_customer_wise_sheet",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-14 18:25:53.368277",
  "module": "Migoo CRM",
  "name": "get_customer_wise_sheet",
  "reference_doctype": null,
  "script": "a=frappe.form_dict[\"from_time\"]\nb=frappe.form_dict[\"to_time\"]\nname1=frappe.form_dict[\"name\"]\nc=frappe.form_dict[\"equipment\"]\nd=frappe.form_dict[\"customer\"]\nff=str(a)\ntt=str(b)\nname= frappe.db.sql(\"\"\"SELECT name FROM `tabLog Sheet` WHERE  equipment=%s AND customer=%s AND date BETWEEN %s AND %s \"\"\",(c,d,ff,tt))\n\nfrappe.msgprint(str(name))\nnm=[]\nfor i in name:\n    for j in i:\n        nm.append(j)\n        \nequip= frappe.db.sql(\"\"\"SELECT equipment FROM `tabLog Sheet` WHERE docstatus = 1 AND equipment=%s AND customer=%s AND date BETWEEN %s AND %s \"\"\",(c,d,ff,tt))\neq=[]\nfor i in equip:\n    for j in i:\n        eq.append(j)\nvar=str(eq)\nfrappe.msgprint(var)\nnew = 0\n\ndoc1 = frappe.get_doc('Sales Invoice', name1)\n\nwhile new < len(nm):\n   \n    doc1.append('log_sheet_details', {\n       \n                \"log_sheet\":nm[new],\n    })\n    \n \n    doc1.save()\n    new1=str(new)\n   \n    new=new+1\n    frappe.db.commit()       \n",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "order",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-14 18:25:53.178183",
  "module": "Migoo CRM",
  "name": "Sales Order Wise Item Filter on Resource Planning",
  "reference_doctype": null,
  "script": "order=frappe.form_dict[\"name\"]\n\nquery=frappe.db.sql(\"Select item_code from `tabSales Order Item` where parent=%s\",order)\n# a=str(query)\nnm=\"\"\nfor i in query:\n    for j in i:\n        # a=j\n        if nm==\"\":\n            nm=j\n        else:\n            nm=nm + \",\" +j\n        # nm.append(j)\nfrappe.response[\"data\"]=nm",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "status_change",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-14 18:25:53.188421",
  "module": "Migoo CRM",
  "name": "Web Item Status Change",
  "reference_doctype": null,
  "script": "a=frappe.form_dict[\"name\"]\nb=frappe.form_dict[\"status\"]\nprice=frappe.form_dict[\"price\"]\nequipment_current_reading=frappe.form_dict[\"equipment_current_reading\"]\nc = int(b)\n\nif c==0:\n    # frappe.msgprint(b)\n    frappe.db.set_value(\"Web item\",a,\"item_status\",\"Unpublish\")\nif c==1:\n    # frappe.msgprint(b)\n    frappe.db.set_value(\"Web item\",a,\"item_status\",\"Publish\")\n    \n\nfrappe.db.set_value(\"Web item\",a,\"price\",price)\nfrappe.db.set_value(\"Web item\",a,\"equipment_current_reading\",equipment_current_reading)",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "check_web_item",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-14 18:25:53.199401",
  "module": "Migoo CRM",
  "name": "check_web_item",
  "reference_doctype": null,
  "script": "name=frappe.form_dict[\"name\"]\n\nqr =frappe.db.sql(\"select name from `tabWeb item` where name=%s\",name)\n\nli=\"\"\nfor i in qr:\n    for j in i:\n        li=j\nfrappe.response[\"data\"]=li",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "check_whatsapp_no",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-16 10:44:15.542619",
  "module": null,
  "name": "check_whatsapp_no",
  "reference_doctype": null,
  "script": "name=frappe.form_dict[\"whatsapp_no\"]\remail=frappe.form_dict[\"email\"]\rli=\"\"\rif name!=\"\":\r    qr =frappe.db.sql(\"select whatsapp_no from `tabLead` where whatsapp_no=%s\",name)\r    \r    # li=\"\"\r    for i in qr:\r        for j in i:\r            li=j\r            \rif email!=\"\":\r    qr =frappe.db.sql(\"select email_id from `tabLead` where email_id=%s\",email)\r    \r    # li=\"\"\r    for i in qr:\r        for j in i:\r            li=j \r# frappe.msgprint(li)\rfrappe.response[\"msg\"]=li",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "check_user",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-03-20 10:55:16.655520",
  "module": "Migoo CRM",
  "name": "check_user",
  "reference_doctype": null,
  "script": "name=frappe.form_dict[\"email\"]\n\nqr =frappe.db.sql(\"select email from `tabUser` where email=%s \",name)\n\nli=\"\"\nfor i in qr:\n    for j in i:\n        li=j\n        \n# frappe.msgprint(li)\nfrappe.response[\"msg\"]=li",
  "script_type": "API"
 }
]